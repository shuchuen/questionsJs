<!doctype html>
<html lang="en" ng-app="todomvc" scroll data-framework="firebase">
<head>
	<meta charset="utf-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- http://stackoverflow.com/questions/1341089/using-meta-tags-to-turn-off-caching-in-all-browsers -->
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />

	<title>InstaQuest | ChatRoom</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">

	<!-- need this for comlted ones. TODO: can I do this in bootstrap -->
	<link rel="stylesheet" href="css/main.css">

</head>
<body ng-controller="TodoCtrl">
	<font size="10">Questions for {{roomId}}?</font>&nbsp;
	<!--

	<a ng-class="{selected: location.path() == '/newechos'}" class="btn btn-primary" href="#/newechos">New Echos</a>
	<a ng-class="{selected: location.path() == '/tags'}" class="btn btn-success" href="#/tags">Tags</a>
	<a ng-class="{selected: location.path() == '/users'}" class="btn btn-info" href="#/users">Users</a>
	<a ng-class="{selected: location.path() == '/about'}" class="btn btn-warning" href="#/about">About</a>
-->

<p><small>Share room url: {{absurl}}</small></p>
<a class="btn btn-default" href="/index.html"><span class="glyphicon glyphicon-home"></span> Main</a>
<button ng-hide="$authData" class="btn btn-primary left" type="button" ng-click="FBLogin()">Facebook</button>
<button ng-hide="$authData" class="btn btn-danger left" type="button" ng-click="GoogleLogin()">Google</button>
<!-- after login -->
<img ng-show="$authData&&FbLogin" src="https://graph.facebook.com/{{$authData.facebook.id}}/picture/?type=square&return_ssl_resources=1" alt="{{name}}" width="30px" height="30px"/>
{{$authData.facebook.displayName}}
<img ng-show="$authData&&googleLogin" ng-src="{{$authData.google.profileImageURL}}" alt="{{name}}" width="30px" height="30px"/>
{{$authData.google.displayName}}
<button ng-show="$authData" class="btn btn-primary left" type="button" ng-click="Logout()">Logout</button>

<!--Refresh button-->
    <button class="btn btn-success pull-right " type="button" ng-click="refresh()"><span class="glyphicon glyphicon-refresh"></span><span> Refresh</span></button>			<!-- button for refreshing the page to show the latest message -->

   <!-- <a href="uniondraw.html"><button class="btn btn-danger pull-right " type="button" ng-click="refresh()"><span class="glyphicon glyphicon-pencil"></span><span>Share Canvas</span></button></a> hide--> 
    
<br/>

<div class="input-group">
	<!--
	<form id="todo-form" ng-submit="addTodo()">
-->
    
<!--
<select class="catagory form-control" ng-model="input.catagory" name="catagory" id="catagory">
    <option value="" disabled selected>Please select a catagory</option>
    <option value="Midterm">Midterm</option>
    <option value="Final">Final</option>
    <option value="Assignment">Assignment</option>
    <option value="Other">Other</option>
</select>
-->
    
<div class="dropdown" ng-model="input.category" ng-init=" input.category='Other'">
  <button class="btn btn-default dropdown-toggle category" type="button" data-toggle="dropdown" ng-Model="displayMessage" ng-init="displayMessage='Category'">{{displayMessage}}
  <span class="caret"></span></button>
  <ul class="dropdown-menu">
    <li class="dropdown-header">Please select a category</li>
    <li ng-click="displayMessage = input.category = 'Midterm' "><a>Midterm</a></li>
    <li ng-click="displayMessage = input.category = 'Final' "><a>Final</a></li>
    <li ng-click="displayMessage = input.category = 'Assignment' "><a>Assignment</a></li>
    <li ng-click="displayMessage = input.category = 'Other' "><a>Other</a></li>  
  </ul>
</div>
    
<textarea type="text" id="new-todo" class="form-control"
placeholder="Search or Post Question"
ng-model="input.wholeMsg" autofocus rows="4" cols="50" required></textarea>
<span class="input-group-btn">
	<button class="btn btn-default" type="button" ng-click="addTodo()">Ask</button>
</span>
</div><!-- /input-group -->


<div class="list-group" id="todo-list">
	<span class="list-group-item"  ng-repeat="todo in todos | filter:input.wholeMsg | questionFilter:maxQuestion" ng-class="{completed: todo.completed, editing: todo == editedTodo}">
		<h4 class="list-group-item-heading">
			<span class="label label-danger" ng-show="todo.new">New</span>
			<span class="badge">{{todo.category}}</span>
        </h4>
        <h4 class="list-group-item-heading">
			<span ng-class="{completed: todo.completed}">{{filter(todo.wholeMsg)}}</span>
		</h4>
<!--		<p class="list-group-item-text"><span ng-bind="todos.trustedDesc"></span></p>-->
        <p><span am-time-ago="todo.timestamp" class = "time-color"></span>							<!--change the time format to N hours ago-->
			<span ng-show="todo.tags">tags: [<a ng-repeat="tag in todo.tags track by $index" ng-click="searchTag(tag)">{{tag}} </a>]</span></p>

        <button ng-click="like(todo)" ng-disabled="$storage[todo.$id]" class="likeButton">
            <img src="img/questionLogo/like.gif" height="30px" width="30px"><span>{{todo.like}}</span>
        </button>
        
        <button ng-click="dislike(todo)"  ng-disabled="$storage[todo.$id]" class="likeButton">
            <img src="img/questionLogo/unlike.gif" height="30px" width="30px"><span>{{todo.dislike}}</span>
        </button>
																												  
<!--		class="btn btn-default btn-xs glyphicon glyphicon-hand-up"-->
		
			<button ng-show="isAdmin" class="btn btn-default btn-xs glyphicon glyphicon-check" ng-click="toggleCompleted(todo)"> Completed</button>
			&nbsp;
			<button ng-show="isAdmin" class="btn btn-default btn-xs glyphicon glyphicon-trash" aria-hidden="true" ng-click="removeTodo(todo)">Del</button>
		</span>
	</div>

	

	<div id="toTop" class="btn btn-info" ng-click="toTop()"><span class="fa fa-arrow-up">Back to Top</span></div>		<!-- button for going back to the top of page-->

<!--
	<button ng-hide="totalCount>=maxQuestion"
	class="pull-right btn btn-default glyphicon glyphicon-arrow-down"
	type="button" ng-click="increaseMax()"> Show more</button>
-->


    <p ng-controller="onlineUserCtrl"><span class="onlineUser">No. of online user: </span>{{totalViewers}}</p>			<!--shows the number of online users -->


<!-- jQuery -->
<script src="js/agency/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="js/agency/bootstrap.min.js"></script>    
    
<!-- Autolink from https://github.com/gregjacobs/Autolinker.js> -->
<script src="js/lib/Autolinker.min.js"></script>

<!-- 2.2.2 -->
<script src="js/lib/firebase.js"></script>
<script src="js/lib/angular.min.js"></script>					<!--credit to urish : https://github.com/urish/angular-moment -->
<script src="js/lib/angularfire.js"></script>

<!-- Ng storage 0.3.6  -->
<script src="js/lib/ngStorage.min.js"></script>

<script src="js/app.js"></script>
<script src="js/filters/questionFilter.js"></script>
<script src="js/controllers/todoCtrl.js"></script>
<script src="js/directives/todoFocus.js"></script>
<script src="js/directives/todoBlur.js"></script>
<script src="js/directives/todoEscape.js"></script>
<!-- AngularMoment-->
<script src="js/lib/moment.js"></script>
<script src="js/lib/angular-moment.min.js"></script>			<!--credit to urish : https://github.com/urish/angular-moment -->
    
</body>
</html>

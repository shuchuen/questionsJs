<!doctype html>
<html lang="en" ng-app="todomvc" scroll data-framework="firebase">
<head>
	<meta charset="utf-8">

	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!-- http://stackoverflow.com/questions/1341089/using-meta-tags-to-turn-off-caching-in-all-browsers -->
	<meta http-equiv="cache-control" content="max-age=0" />
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
	<meta http-equiv="pragma" content="no-cache" />
    
    <link rel="icon" href="img/logo.png">
	<title>InstaQuest | ChatRoom</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    
    <!--font-awesome icons library-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">

<!--
    <link href="css/nanoscroller.css" rel="stylesheet">
    <link href="css/emoji.css" rel="stylesheet">
-->
    
	<!-- need this for comlted ones. TODO: can I do this in bootstrap -->
	<link rel="stylesheet" href="css/main.css">

</head>
<body ng-controller="TodoCtrl">  
        <nav class="navbar navbar-default navbar-fixed-top iqRoomMenu">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <div class="navbar-header page-scroll">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#iqMenu">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button> 
                </div>

                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse" id="iqMenu">
                    

                    <ul class="nav navbar-nav navbar-left">
                        <li class="hidden">
                            <a href="#page-top"></a>
                        </li>
                        <li>
                            <a class="btn" href="index.html"><i class="fa fa-home"></i> HOME</a>
                        </li>
                        <li>
                            <a class="btn" href="feature.html"><i class="fa fa-list"></i> FEATURES</a>
                        </li>
                    </ul>
                    
                    <ul class="nav navbar-nav navbar-right">
                        
                        <li ng-hide="$authData">
                            <a class="btn btn-info iqLogin" data-toggle="modal" data-target="#loginModal"><i class="fa fa-sign-in"></i> Sign up/Login</a>
                        </li>
                        <li ng-show="$authData">
                            <a class="btn btn-success iqLogout" ng-click="Logout()"><i class="fa fa-sign-out"></i>Logout</a>
                        </li>
                    </ul>
                </div>
                <!-- /.navbar-collapse -->
            </div>
            <!-- /.container-fluid -->
        </nav>
        
    <div class="mainBody">
        <div class="jumbotron">
            <div class="container">
                <span class="userInfo">
                        <img ng-show="$authData&&FbLogin" src="https://graph.facebook.com/{{$authData.facebook.id}}/picture/?type=square&return_ssl_resources=1" width="30px" height="30px"/>{{$authData.facebook.displayName}}
                        <img ng-show="$authData&&googleLogin" ng-src="{{$authData.google.profileImageURL}}" width="30px" height="30px"/> {{$authData.google.displayName}}
                        <img ng-show="$authData&&normalLogin" ng-src="{{$authData.password.profileImageURL}}" width="30px" height="30px"/>{{$authData.password.email}}
                </span>
                <p>
                    <font size="10">Chatroom for <span class="text-success">{{roomId}}</span></font>
                </p>
                    <!--

                <a ng-class="{selected: location.path() == '/newechos'}" class="btn btn-primary" href="#/newechos">New Echos</a>
                <a ng-class="{selected: location.path() == '/tags'}" class="btn btn-success" href="#/tags">Tags</a>
                <a ng-class="{selected: location.path() == '/users'}" class="btn btn-info" href="#/users">Users</a>
                <a ng-class="{selected: location.path() == '/about'}" class="btn btn-warning" href="#/about">About</a>
            -->

            <p class="shareUrl"><small>Share room: {{absurl}}</small></p>
            <!-- after login -->   
              
                
				<!--ON OFF function for bad word filter-->

				<!--	For milestone 2
				
				<input type="checkbox" name="filter" value="TRUE">Bad Words Filter ON<br> 
				-->
				
            <!--Refresh button-->
            <!-- button for refreshing the page to show the latest message -->    
            <button class="btn btn-success pull-right refreshBtn" type="button" ng-click="refresh()" title="Refresh the content"><i class="fa fa-retweet"></i> Refresh</button>
                
            <!--get the right of staff-->
            <button ng-show="$authData&&!isStaff" class="btn btn-danger pull-right staffBtn" type="button" ng-click="getStaffRight()" title="Get the right of staff"><i class="fa fa-unlock"></i><span> Get the right of staff</span></button>
                
               <!-- <a href="uniondraw.html"><button class="btn btn-danger pull-right " type="button" ng-click="refresh()"><span class="glyphicon glyphicon-pencil"></span><span>Share Canvas</span></button></a> hide--> 
            
            <br/>
                
            <form id="todo-form" class="col-xs-12 iqButtonGp" ng-submit="addTodo()">
            
                <div class="input-group col-xs-12 iqButtonGp">
                    <div class="catagory iqButtonGp">
                        <select class="category form-control zeroBorder" ng-model="input.category" name="category" id="category" style="width: 110px;" required>
                            <option value="" disabled selected>Category</option>
                            <option value="Midterm">Midterm</option>
                            <option value="Final">Final</option>
                            <option value="Assignment">Assignment</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>    

                    <!--
                        <div class="dropdown col-sm-12 col-xs-6 iqButtonGp" ng-model="input.category" ng-init=" input.category='Other'">
                              <button class="btn btn-default iqButtonGp dropdown-toggle category" type="button" data-toggle="dropdown" ng-Model="displayMessage" ng-init="displayMessage='Category'">{{displayMessage}}
                                <span class="caret"></span>
                              </button>
                              <ul class="dropdown-menu">
                                <li class="dropdown-header">Please select a category</li>
                                <li ng-click="displayMessage = input.category = 'Midterm' "><a>Midterm</a></li>
                                <li ng-click="displayMessage = input.category = 'Final' "><a>Final</a></li>
                                <li ng-click="displayMessage = input.category = 'Assignment' "><a>Assignment</a></li>
                                <li ng-click="displayMessage = input.category = 'Other' "><a>Other</a></li>  
                              </ul>
                        </div>
        -->
                    
                    <div class="col-sm-11 col-xs-12 iqTextArea">
                        <textarea type="text" id="new-todo" class="form-control textarea-control zeroBorder"
                        placeholder="Search or Post Question"
                        ng-model="input.wholeMsg" autofocus rows="3" required>
                        </textarea>
                    </div>
                    <div class="col-sm-1 col-xs-12 iqButtonGp">
                        <button class="btn btn-default zeroBorder askBtn" type="button" ng-click="addTodo()">
                            <i class="fa fa-question-circle"></i> Ask
                        </button>
                    </div>
                </div>
                </form>
                <!-- /form-group -->
        </div>
            <div id="secMsg">
                <span>You are not in the staffs list, please contact technical team.</span>
            </div>    
    </div>
        <div class="container">
            <div class="list-group" id="todo-list">
                <span class="zeroBorderRadius list-group-item" ng-repeat="todo in todos | filter:input.wholeMsg | orderBy:'-timestamp'" ng-class="{completed: todo.completed, editing: todo == editedTodo}">
        <!--   | questionFilter:maxQuestion          -->
                    <h4 class="list-group-item-heading">
                        <span class="label label-danger" ng-show="checkNew(todo)">New</span>
                        <span class="badge">{{todo.category}}</span>
                    </h4>
                    <h4 class="list-group-item-heading">
                        <span ng-class="{completed: todo.completed}">{{filter(todo.wholeMsg)}}</span>
                    </h4>
            <!--		<p class="list-group-item-text"><span ng-bind="todos.trustedDesc"></span></p>-->
                    <p>
                        <span am-time-ago="todo.timestamp" class = "time-color"></span>
                        <!--change the time format to N hours ago-->
                        <span ng-show="todo.tags">tags: [<a ng-repeat="tag in todo.tags track by $index" ng-click="searchTag(tag)">{{tag}} </a>]                        </span>
                    </p>

                    <button ng-click="like(todo)" ng-disabled="$storage[todo.$id]" class="likeButton">
                        <img src="img/questionLogo/like.gif" height="30px" width="30px"><span>{{todo.like}}</span>
                    </button>

                    <button ng-click="dislike(todo)"  ng-disabled="$storage[todo.$id]" class="likeButton">
                        <img src="img/questionLogo/unlike.gif" height="30px" width="30px"><span>{{todo.dislike}}</span>
                    </button>

            <!--		class="btn btn-default btn-xs glyphicon glyphicon-hand-up"-->

<!--                    <button ng-show="!isStaff" class="btn btn-danger glyphicon glyphicon-check" ng-click="toggleCompleted(todo)"> Completed</button>-->
                    <button ng-show="isStaff" class="btn btn-danger" aria-hidden="true" ng-click="removeTodo(todo)"><i class="fa fa-trash-o"></i> Del</button>
                    <button ng-show="isStaff" class="btn btn-danger" aria-hidden="true" ng-click="bestTodo(todo)"><i class="fa fa-star"></i> Best Question</button>
                    </span>
                </div>
        </div>
        <div class="container">
<!--        <div id="toTop" class="btn btn-info" ng-click="toTop()"><span class="fa fa-arrow-up">Back to Top</span></div>		 button for going back to the top of page-->

    <!--
        <button ng-hide="totalCount>=maxQuestion"
        class="pull-right btn btn-default glyphicon glyphicon-arrow-down"
        type="button" ng-click="increaseMax()"> Show more</button>
    -->
        
        </div>
    <footer class="footer">    
        <div class="container">
            <div class="pull-left" ng-controller="onlineUserCtrl">
                <!--shows the number of online users -->
                <span class="onlineUser">No. of online user: {{totalViewers}} </span>	
            </div>
            <div class="pull-right">
<!--                <span>Emoji provided free by <a href="http://emojione.com/">Emoji One</a></span>-->
            </div>    
        </div> 
    </footer> 
<!-- Modal -->
<div id="loginModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content zeroBorderRadius">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal"></button>
        <h4 class="modal-title">Sign up/Login</h4>
      </div>
      <div class="modal-body">
          <p class="bg-success" ng-model="showSignUp" ng-init="showSignUp = false">
              <span>Sign up:</span>
              <span>
                  <i class="fa fa-chevron-down pull-right" ng-show="!showSignUp" ng-click="showSignUp = !showSignUp" ></i>
                  <i class="fa fa-chevron-up pull-right" ng-show="showSignUp" ng-click="showSignUp = !showSignUp" ></i>
              </span>
          </p>
          <p class="bg-warning" ng-show="createFail"><span class="text-danger">{{createError.toString()}}</span></p>
          <form id="signUpForm" class="csl-xs-12" ng-submit = "signUpForm()" ng-show="showSignUp">
              <div class="form-group">
                  <label for="signupUsername">Email address:</label>
                  <input class="form-control zeroRadius" type="email"  id="signupUsername" ng-model="signup.username" placeholder="Email" required/>
              </div>
              <div class="form-group">
                  <label for="signupPassword">Password:</label>
                  <input class="form-control zeroRadius" type="password" id="signupPassword" ng-model="signup.password" placeholder="Password" required />
              </div> 
              <input class="btn btn-warning pull-right" type="submit" value="Sign Up">
          </form>
          
        <hr/>
          <p class="bg-success" ng-model="showSignUp" ng-init="showLogin = true">
              <span>Login:</span>
              <span>
                  <i class="fa fa-chevron-down pull-right" ng-show="!showLogin" ng-click="showLogin = !showLogin"></i>
                  <i class="fa fa-chevron-up pull-right" ng-show="showLogin" ng-click="showLogin = !showLogin"></i>
              </span>
          </p>
          <p class="bg-warning" ng-show="authFail"><span class="text-danger">{{authError.toString()}}</span></p>
          <form id="loginForm" class="csl-xs-12" ng-submit = "loginForm()" ng-show="showLogin" style="margin-botton=5px;">
              <div class="form-group">
                  <label for="loginUsername">Email address:</label>
                  <input class="form-control zeroRadius" type="email"  id="loginUsername" ng-model="login.username" placeholder="Email" required/>
              </div>
              <div class="form-group">
                  <label for="loginPassword">Password:</label>
                  <input class="form-control zeroRadius" type="password" id="loginPassword" ng-model="login.password" placeholder="Password" required />
              </div>      
              <input class="btn btn-warning pull-right" type="submit" value="Login">
          </form>  
          
            <button class="btn btn-primary left csl-xs-12" type="button" ng-click="FBLogin()"><i class="fa fa-facebook-official"></i>  Facebook</button>
            <button class="btn btn-danger left csl-xs-12" type="button" ng-click="GoogleLogin()"><i class="fa fa-google-plus-square"></i> Google</button>
          
      </div>
          
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>    
<!-- jQuery -->
<script src="js/agency/jquery.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="js/agency/bootstrap.min.js"></script>    
    
<!-- Autolink from https://github.com/gregjacobs/Autolinker.js> -->
<script src="js/lib/Autolinker.min.js"></script>

<!-- 2.2.2 -->
<script src="js/lib/firebase.js"></script>
<script src="js/lib/angular.min.js"></script>					
<!--credit to urish : https://github.com/urish/angular-moment -->
<script src="js/lib/angularfire.js"></script>

<!-- Ng storage 0.3.6  -->
<script src="js/lib/ngStorage.min.js"></script>

<script src="js/app.js"></script>
<script src="js/filters/questionFilter.js"></script>
<script src="js/controllers/todoCtrl.js"></script>
<script src="js/directives/todoFocus.js"></script>
<script src="js/directives/todoBlur.js"></script>
<script src="js/directives/todoEscape.js"></script>
<!-- AngularMoment-->
<script src="js/lib/moment.js"></script>
<script src="js/lib/angular-moment.min.js"></script>			
<!--credit to urish : https://github.com/urish/angular-moment -->
    
<!--
        
<script src="js/nanoscroller.min.js"></script>
<script src="js/tether.min.js"></script>
<script src="js/config.js"></script>
<script src="js/util.js"></script>
<script src="js/jquery.emojiarea.js"></script>
<script src="js/emoji-picker.js"></script>

        
<script>
    $(function() {
      
      window.emojiPicker = new EmojiPicker({
        emojiable_selector: '[data-emojiable=true]',
        assetsPath: 'img/',
        popupButtonClasses: 'fa fa-smile-o'
      });
      
      window.emojiPicker.discover();
    });
  </script>        
-->
</body>
</html>
